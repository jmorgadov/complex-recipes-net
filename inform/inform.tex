%===================================================================================
% PREÁMBULO
%-----------------------------------------------------------------------------------
\documentclass[a4paper]{article}

%===================================================================================
% Paquetes
%-----------------------------------------------------------------------------------
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{inform}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage[pdftex]{hyperref}
\usepackage{caption}
\usepackage{subcaption}
%-----------------------------------------------------------------------------------
% Configuración
%-----------------------------------------------------------------------------------
\hypersetup{colorlinks,%
	    citecolor=black,%
	    filecolor=black,%
	    linkcolor=black,%
	    urlcolor=blue}

%===================================================================================


%===================================================================================
% Presentacion
%-----------------------------------------------------------------------------------
% Título
%-----------------------------------------------------------------------------------
\title{Análisis de redes complejas en el mundo de la cocina: una exploración de
las relaciones entre ingredientes y recetas}

%-----------------------------------------------------------------------------------
% Autores
%-----------------------------------------------------------------------------------
\author{\\
\name Jorge Morgado \email \href{mailto:jorge.morgadov@gmail.com}{jorge.morgadov@gmail.com}
	\AND
\name Roberto García \email \href{mailto:robegr42@gmail.com}{robegr42@gmail.com}
}

%-----------------------------------------------------------------------------------
% Tutores
%-----------------------------------------------------------------------------------
% \tutors{\\
% Dr. Tutor Uno, \emph{Centro} \\
% Lic. Tutor Dos, \emph{Centro}}

%-----------------------------------------------------------------------------------
% Headings
%-----------------------------------------------------------------------------------
\jcematcomheading{\the\year}{1-\pageref{end}}{J. Morgado, R. García}

%-----------------------------------------------------------------------------------
\ShortHeadings{Análisis de redes complejas}{J. Morgado, R. García}
%===================================================================================


\newcommand{\todo}[1]{\color{red}#1\color{black}}

%===================================================================================
% DOCUMENTO
%-----------------------------------------------------------------------------------
\begin{document}

%-----------------------------------------------------------------------------------
% NO BORRAR ESTA LINEA!
%-----------------------------------------------------------------------------------
% \twocolumn[
%-----------------------------------------------------------------------------------

\maketitle

%===================================================================================
% Resumen y Abstract
%-----------------------------------------------------------------------------------
\selectlanguage{spanish} % Para producir el documento en Español

%-----------------------------------------------------------------------------------
% Resumen en Español
%-----------------------------------------------------------------------------------
\begin{abstract}

	El análisis de redes complejas es una técnica matemática que se utiliza para
	estudiar sistemas complejos que pueden ser representados mediante nodos y
	conexiones. Esta técnica se aplica en una amplia variedad de campos, como la
	biología, la física, la sociología y la informática. En el ámbito de las
	recetas de cocina, el análisis de redes complejas se utiliza para analizar
	las relaciones entre los ingredientes y las recetas. Estos estudios han
	permitido identificar patrones, tendencias en la forma en que se utilizan
	los ingredientes,  las combinaciones de sabores más populares y las recetas
	más comunes.

\end{abstract}

%-----------------------------------------------------------------------------------
% English Abstract
%-----------------------------------------------------------------------------------
\vspace{0.5cm}

\begin{enabstract}

	Complex network analysis is a mathematical technique used to study complex
	systems that can be represented by nodes and connections. This technique is
	applied in a wide variety of fields such as biology, physics, sociology and
	computer science. In the field of cooking recipes, complex network analysis
	is used to analyze the relationships between ingredients and recipes. These
	studies have allowed the identification of patterns and trends in the way
	ingredients are used, the most popular flavor combinations, and the most
	common recipes.

\end{enabstract}

%-----------------------------------------------------------------------------------
% Palabras clave
%-----------------------------------------------------------------------------------
\begin{keywords}
	Red compleja, grafo, ingredientes
\end{keywords}

%-----------------------------------------------------------------------------------
% Temas
%-----------------------------------------------------------------------------------
\begin{topics}
	Análisis de redes complejas
\end{topics}


%-----------------------------------------------------------------------------------
% NO BORRAR ESTAS LINEAS!
%-----------------------------------------------------------------------------------
\vspace{0.8cm}
% ]
%-----------------------------------------------------------------------------------


%===================================================================================

%===================================================================================
% Introducción
%-----------------------------------------------------------------------------------
\section{Introducción}\label{sec:intro}
%-----------------------------------------------------------------------------------

El análisis de redes complejas es un campo interdisciplinario que se enfoca en
el estudio de las propiedades y el comportamiento de sistemas complejos que
pueden ser modelados como un grafo, cuyos nodos y enlaces a representan
entidades y relaciones en sistemas como redes sociales, sistemas de transporte,
redes de comunicación, redes de información, etc.
\cite{boccaletti2006complex}

El análisis de redes complejas utiliza herramientas matemáticas y
computacionales para estudiar la estructura, la dinámica y la función de las 
mismas. Algunas de las medidas importantes que se utilizan en el análisis de
redes complejas son la centralidad, la modularidad, la conectividad y la
robustez.\cite{costa2007characterization}

El análisis de redes complejas se ha utilizado para analizar las relaciones
entre los ingredientes y las recetas. Esta técnica ha permitido identificar
patrones y tendencias en la forma en que se utilizan los ingredientes y las
combinaciones de sabores más populares. Además, ha permitido entender mejor la
historia y la evolución de las recetas, al analizar cómo los ingredientes y las
combinaciones de sabores han cambiado con el tiempo y cómo se han difundido a
través de diferentes culturas y regiones. \cite{ahn2011flavor, herrera2021contribution}

En este trabajo, se explorará el análisis de redes complejas en el ámbito de las
recetas de cocina. Se realizarán varios estudios con respecto a distintos grafos
obtenidos, entre los cuales se representan relaciones entre ingredientes y
recetas y relaciones entre recetas buscando un comportamiento de similaridad.

El informe prosigue con la siguente es estructura: primero una sección dedicada
al tratamiento y extracción de los datos \ref{sec:data}, una sección que
aborda la creación de de los grafos analisados asi como su representación
\ref{sec:graphs} y luego una sección sobre la aplciación creada para la
interacción de usuarios \ref{sec:app}. Posteriormente, se presentan las
conclusiones finales \ref{sec:conc} y algunas recomendaciones para estudios
futuros \ref{sec:rec}.

%===================================================================================



%-----------------------------------------------------------------------------------
% En el presente trabajo se analiza la relación entre ingredientes y recetas,
% las cuales son representadas en grafos que contienen dicha información. Se
% pretende estudiar varios comportamientos y realizar diferentes estudios, los
% cuales serán explicados en las secciones siguientes. 

% Para una mejor visualiazción de los resultados se desarrolló una aplicación de
% \emph{Streamlit} en la cual se puede interactuar con los análisis propuestos.
% Además se trabaja con la biblioteca \emph{networkx} de \emph{Python}, la cual
% contienen algoritmos para trabajar con las estructuras creadas.

%-----------------------------------------------------------------------------------

\section{Extracción de datos}\label{sec:data}

Para la realización de este proyecto se usaron dos fuentes de datos: el libro
\emph{Cocina al minuto} de la escritora Nitza Villapol y el \emph{dataset}
Recipes5k creado en la Universidad de Barcelona [\href{http://www.ub.edu/cvub/recipes5k/}{Recipes5k}]
\cite{bolanos2017food}.

La extracción de las recetas e ingredientes del libro \emph{Cocina al minuto}
se realizó de forma manual. Posteriormente, estos datos fueron traducidos al
inglés con el objetivo de manternet la consistencia con el resto de las
fuentes. En el caso del \emph{dataset} Recipes5k se seleccionaron los nombres
de las recetas y los ingredientes simplificados.

Finalmente todos estos datos fueron unificados en un solo archivo de formato
\texttt{json}. La estrucutra del mismo se basa en un diccionario donde cada
receta representa una llave y su valor es una lista de ingredientes.

%-----------------------------------------------------------------------------------

%-----------------------------------------------------------------------------------
\section{Grafos implementados}\label{sec:graphs}

En el proyecto se implementaron grafos utilizando la biblioteca \emph{NetworkX}
de \emph{Python}. El objetivo principal del proyecto fue extraer información de
los grafos para mostrarla en una aplicación. Para lograr este objetivo, se
crearon grafos a partir de los datos previamente mencionados. Una vez creados
los grafos, se utilizaron las funciones de \emph{NetworkX} para analizarlos y
extraer la información deseada. Dichos grafos serán explicados es secciones
posteriores.

\subsection{Grafo de Ingredientes y Recetas}\label{sub:ing-recip-graph}
%-----------------------------------------------------------------------------------

Una de las interrogantes más simples que un usuario puede tener es saber
qué recetas se pueden cocinar dado una lista de ingredientes. Para ello,
se construyó un grafo bipartito donde cada vértice representa una receta
o un ingrediente y cada arista $(u, v)$ existe si y solo si el ingrediente
$u$ es necesario en la receta $v$ (o vice versa).

Luego, sea $nb(x)$ los vecinos de un nodo $x$, y dado una lista de ingredientes
$A = a_1, a_2, ..., a_n$, el conjunto de recetas que se pueden preparar está dado
por:

$$ nb(a_1) \cap nb(a_2) \cap ... \cap nb(a_n)$$

Expresado de otra manera, el conjunto de recetas $u$ tal que existe al menos
una arista en $E$ (conjunto de aristas del grafo) entre algún ingrediente de
$A$ y la receta $u$:

$$ \{v ~|~ (a, v) \in E \wedge a \in A \} $$

%-----------------------------------------------------------------------------------
\subsection{Grafo de Similaridad de Recetas}\label{sub:sim-rec-graph}
%-----------------------------------------------------------------------------------

Otra pregunta interesante es saber que recetas son similares entre sí. Para
ello se construyó un grafo ponderado donde cada vértice representa una receta,
y las aristas entre recetas indican el nivel de similitud de las mismas.

Si se define $Ing(r)$ como el conjunto de ingredientes necesarios para la preparació
de una receta $r$, el coeficiente de similitud entre dos recetas se puede definir como:

$$ c(r_1, r_2) = \frac{|Ing(r_1) \cap Ing(r_2)|}{|Ing(r_1) \cup Ing(r_2)|}$$

Debido a la densidad de este grafo, solo se almacenaron las aristas con un 
coeficiente $c > 0.3$.

Luego, dado una receta $r$, se pueden obtener las recetas más similares a ella
analizando el peso de las aristas de la forma $(r, u)$ en el grafo.

%-----------------------------------------------------------------------------------
\subsection{Grafo de IF-IRF}\label{sub:sim-graph}
%-----------------------------------------------------------------------------------

%-----------------------------------------------------------------------------------
\section{Aplicación de Streamlit}\label{sec:app}
%-----------------------------------------------------------------------------------

Como medio de muestra de los estudios realizados en este trabajo se realizón
una aplicación de Streamlit. En la aplicación se visualizan los algoritmos sobre
los distintos grafos propuestos. De esta forma se observan todas las recetas del
conjunto de datos, los ingrdientes que la conformas, asi como un sistema de
filtrado de recetas de acuerdo a una lista de ingredientes que la conformen o no.

También se integró un pequeño moledelo de \emph{scraping} que muestra varios
enlaces a sitios en internet que muestran como elaborar una receta dada, dicho
enlaces son producto de una búsqueda en \emph{Google}.

%===================================================================================
% Conclusiones
%-----------------------------------------------------------------------------------
\section{Conclusiones}\label{sec:conc}

En este trabajo, se mostraron cómo las técnicas de analisis de redes complejas
se utilizan para entender las relaciones entre los ingredientes y las recetas.
Se identificaron patrones y tendencias en la forma en que se utilizan los
ingredientes y las combinaciones de sabores.

Se logró buscar una similaridad entre tipos de recetas, con resultados
basados en los datos analizados. Dichos datos representaban como ingredientes de
características parecidas podían usarse indistintamente en una misma receta o
analizando el porciento de ingredientes comunes entre las mismas. Con este
resultado se obtiene versatilidad a la hora de hacer una elaboración deseada sin
tener completamente el conjunto de ingredientes que la conforman.

Se obtuvo, además, una herramienta que permita analizar que ingredientes se
suelen usar con otros y que al mismo tiempo dicha combinación sea representativa,
la cual, junto a la herramienta de \emph{scraping} integrada en la aplicación,
se logra un modelo completo de ayuda al usuario, ya que proporciona los medios
y los pasos de elaboración.

En resumen, el análisis de redes complejas es una técnica de análisis esencial
para entender mejor y explorar la complejidad de las relaciones entre los
ingredientes y las recetas en el mundo de la cocina.

%===================================================================================

%===================================================================================
% Recomendaciones
%-----------------------------------------------------------------------------------
\section{Recomendaciones}\label{sec:rec}

A continuación, se presentan algunas recomendaciones a tener en cuenta para
futuros trabajos:
\begin{itemize}
	\item Agregar más información a las redes(grafos) analizados así como la
	exploración de otras variantes, como la creación de nuevos grafos.
	\item Insertar conocimiento nutricional para analizar estilos saludables de
	alimentación
	\item Insertar conocimiento geográfico que permita un análisis regional
	agregando, además, recetas de diferentes culturas.
	\item Agregar información sobre métodos de cocción que sirvan de métrica de
	comparación en funciones de similaridad entre recetas.
\end{itemize}

%===================================================================================



%===================================================================================
% Bibliografía
%-----------------------------------------------------------------------------------

\bibliography{Bibliography.bib}

%plain, unsrt, abbrv y alpha.
%-----------------------------------------------------------------------------------

\label{end}

\end{document}

%===================================================================================
